{% extends "base.html" %}

{% block head %}
    {{ super() }}
    <link rel="stylesheet" href="{{ url_for('profile.static', filename='css/country_profile.css') }}">
    <title>Country Profile - Parkour Progress</title>
{% endblock %}

{% block content %}
    <div id="main-container">
        <div id="search-container">
            <div id="search-bar">
                <i class="fa-solid fa-magnifying-glass"></i>
                <input type="text" placeholder="Enter country" autocomplete="off" id="search-input">
                <div id="suggestions-container"></div>
            </div>
        </div>
                <div id="profile-container">
                    <div id="country-title-container">
                        <img class="flag" src="{{ url_for('static', filename=flags[country_code]) }}" alt="{{ flag }}">
                        <span>{{ country_name }}</span>
                    </div>

                    <div id="players-container">
                        <div id="players-header-container">
                            <span id="players-header-text">Players</span>
                            <div class="info-icon">
                                i
                                <div class="popup">
                                    <span>
                                        Currently sorted by number of maps completed, will likely be changed when the ranking system is implemented.
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div id="players-list-container">
                            {% for player in players %}
                                <div class="player-container" onclick="window.location.href = '{{ url_for('profile.player_profile', player_id = player.ID) }}';">
                                    <img src="https://vzge.me/face/{{ player.Name }}" class="player-face">
                                    {{ player.Name }}
                                </div>
                            {% endfor %}
                        </div>
                    </div>

                    <div id="stats-container">
                        <div class="stat-container">
                            <img src="{{ url_for('static', filename='images/icon-players.png') }}"/>
                            <div class="stat-title">
                                <span>Players</span>
                                <span class="stat-number">{{ stats['PlayerCount'] }}</span>
                            </div>
                            <div class="stat-rankings">
                                <span class="stat-rankings-1"><strong>{{ stats['PlayerCountPercent'] }}%</strong> of all players</span>
                                <span class="stat-rankings-2"><strong>#{{ stats['PlayerCountPosition'] }}</strong> global</span>
                            </div>
                        </div>
                        <div class="stat-container">
                            <img src="{{ url_for('static', filename='images/icon-trophy.png') }}"/>
                            <div class="stat-title">
                                <span>Map completions</span>
                                <span class="stat-number"></span>
                            </div>
                            <div class="stat-rankings">
                                <span class="stat-rankings-1"><strong>%</strong> of all completions</span>
                                <span class="stat-rankings-2"><strong>#</strong> global</span>
                            </div>
                        </div>
                        <div class="stat-container">
                            <img src="{{ url_for('static', filename='images/icon-fails.svg') }}"/>
                            <div class="stat-title">
                                <span>Sky fails</span>
                                <span class="stat-number"></span>
                            </div>
                            <div class="stat-rankings">
                                <span class="stat-rankings-1"><strong>%</strong> of all sky fails</span>
                                <span class="stat-rankings-2"><strong>#</strong> global</span>
                            </div>
                        </div>
                    </div>

            </div>
                <div id="profile-container-empty">
                    <div id="country-title-container">
                        <img class="flag" src="{{ url_for('static', filename=flags[country_code]) }}" alt="{{ flag }}">
                        <span>{{ country_name }}</span>
                    </div>
                    <div id="empty-container">
                        <div class="wave-container">
                            <h1 class="wave-text">
                                <span>E</span><span>M</span><span>P</span><span>T</span><span>Y</span>
                            </h1>
                        </div>
                    </div>
                </div>
    </div>

    <script>
        var countries = {{ countries | tojson }};
        const flags = {{ flags | tojson }}
    </script>
    <script src="{{ url_for('profile.static', filename='js/country_profile.js') }}"></script>
{% endblock %}